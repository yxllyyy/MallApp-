if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";const n=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const i=n({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(t,n,i,r,o,a){return o.width?(e.openBlock(),e.createElementBlock("view",{key:0,style:e.normalizeStyle("width:"+o.width+";"+(o.square?"height:"+o.width:"")),class:"uni-grid-item"},[e.createElementVNode("view",{class:e.normalizeClass([{"uni-grid-item--border":o.showBorder,"uni-grid-item--border-top":o.showBorder&&i.index<o.column,"uni-highlight":o.highlight},"uni-grid-item__box"]),style:e.normalizeStyle({"border-right-color":o.borderColor,"border-bottom-color":o.borderColor,"border-top-color":o.borderColor}),onClick:n[0]||(n[0]=(...e)=>a._onClick&&a._onClick(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)],4)):e.createCommentVNode("",!0)}],["__scopeId","data-v-2511947d"]]);function r(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}function o(e,n){return t.isString(e)?n:e}const a=t=>(n,i=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,i)},s=a("onLoad"),c=a("onReachBottom");const l=n({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,n)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view",{class:"uni-grid-wrap"},[e.createElementVNode("view",{id:o.elId,ref:"uni-grid",class:e.normalizeClass(["uni-grid",{"uni-grid--border":i.showBorder}]),style:e.normalizeStyle({"border-left-color":i.borderColor})},[e.renderSlot(t.$slots,"default",{},void 0,!0)],14,["id"])])}],["__scopeId","data-v-a6acbddc"]]);
/*!
    * pinia v2.0.23
    * (c) 2022 Eduardo San Martin Morote
    * @license MIT
    */
let u;const d=e=>u=e,p=Symbol();function m(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var h,f;(f=h||(h={})).direct="direct",f.patchObject="patch object",f.patchFunction="patch function";const g="undefined"!=typeof window;function y(){const t=e.effectScope(!0),n=t.run((()=>e.ref({})));let i=[],r=[];const o=e.markRaw({install(e){d(o),o._a=e,e.provide(p,o),e.config.globalProperties.$pinia=o,r.forEach((e=>i.push(e))),r=[]},use(e){return this._a?i.push(e):r.push(e),this},_p:i,_a:null,_e:t,_s:new Map,state:n});return o}const v=()=>{};function _(t,n,i,r=v){t.push(n);const o=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),r())};return!i&&e.getCurrentInstance()&&e.onUnmounted(o),o}function w(e,...t){e.slice().forEach((e=>{e(...t)}))}function k(t,n){t instanceof Map&&n instanceof Map&&n.forEach(((e,n)=>t.set(n,e))),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i],o=t[i];m(o)&&m(r)&&t.hasOwnProperty(i)&&!e.isRef(r)&&!e.isReactive(r)?t[i]=k(o,r):t[i]=r}return t}const b=Symbol();const{assign:B}=Object;function C(t,n,i={},r,o,a){let s;const c=B({actions:{}},i),l={deep:!0};let u,p,f,g=e.markRaw([]),y=e.markRaw([]);const C=r.state.value[t];let A;function E(n){let i;u=p=!1,"function"==typeof n?(n(r.state.value[t]),i={type:h.patchFunction,storeId:t,events:f}):(k(r.state.value[t],n),i={type:h.patchObject,payload:n,storeId:t,events:f});const o=A=Symbol();e.nextTick().then((()=>{A===o&&(u=!0)})),p=!0,w(g,i,r.state.value[t])}a||C||(r.state.value[t]={}),e.ref({});const S=v;function I(e,n){return function(){d(r);const i=Array.from(arguments),o=[],a=[];function s(e){o.push(e)}function c(e){a.push(e)}let l;w(y,{args:i,name:e,store:P,after:s,onError:c});try{l=n.apply(this&&this.$id===t?this:P,i)}catch(u){throw w(a,u),u}return l instanceof Promise?l.then((e=>(w(o,e),e))).catch((e=>(w(a,e),Promise.reject(e)))):(w(o,l),l)}}const $={_p:r,$id:t,$onAction:_.bind(null,y),$patch:E,$reset:S,$subscribe(n,i={}){const o=_(g,n,i.detached,(()=>a())),a=s.run((()=>e.watch((()=>r.state.value[t]),(e=>{("sync"===i.flush?p:u)&&n({storeId:t,type:h.direct,events:f},e)}),B({},l,i))));return o},$dispose:function(){s.stop(),g=[],y=[],r._s.delete(t)}},P=e.reactive($);r._s.set(t,P);const V=r._e.run((()=>(s=e.effectScope(),s.run((()=>n())))));for(const d in V){const n=V[d];if(e.isRef(n)&&(x=n,!e.isRef(x)||!x.effect)||e.isReactive(n))a||(!C||m(j=n)&&j.hasOwnProperty(b)||(e.isRef(n)?n.value=C[d]:k(n,C[d])),r.state.value[t][d]=n);else if("function"==typeof n){const e=I(d,n);V[d]=e,c.actions[d]=n}}var j,x;return B(P,V),B(e.toRaw(P),V),Object.defineProperty(P,"$state",{get:()=>r.state.value[t],set:e=>{E((t=>{B(t,e)}))}}),r._p.forEach((e=>{B(P,s.run((()=>e({store:P,app:r._a,pinia:r,options:c}))))})),C&&a&&i.hydrate&&i.hydrate(P.$state,C),u=!0,p=!0,P}function A(t,n,i){let r,o;const a="function"==typeof n;function s(t,i){const s=e.getCurrentInstance();(t=t||s&&e.inject(p))&&d(t),(t=u)._s.has(r)||(a?C(r,n,o,t):function(t,n,i,r){const{state:o,actions:a,getters:s}=n,c=i.state.value[t];let l;l=C(t,(function(){c||(i.state.value[t]=o?o():{});const n=e.toRefs(i.state.value[t]);return B(n,a,Object.keys(s||{}).reduce(((n,r)=>(n[r]=e.markRaw(e.computed((()=>{d(i);const e=i._s.get(t);return s[r].call(e,e)}))),n)),{}))}),n,i,0,!0),l.$reset=function(){const e=o?o():{};this.$patch((t=>{B(t,e)}))}}(r,o,t));return t._s.get(r)}return"string"==typeof t?(r=t,o=a?i:n):(o=t,r=t.id),s.$id=r,s}let E="Store";function S(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(){return e(this.$pinia)[n]},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]=function(){const n=e(this.$pinia),r=t[i];return"function"==typeof r?r.call(this,n):n[r]},n)),{})}const I=S;function $(t){{t=e.toRaw(t);const n={};for(const i in t){const r=t[i];(e.isRef(r)||e.isReactive(r))&&(n[i]=e.toRef(t,i))}return n}}const P=Object.freeze(Object.defineProperty({__proto__:null,get MutationType(){return h},PiniaVuePlugin:function(e){e.mixin({beforeCreate(){const e=this.$options;if(e.pinia){const t=e.pinia;if(!this._provided){const e={};Object.defineProperty(this,"_provided",{get:()=>e,set:t=>Object.assign(e,t)})}this._provided[p]=t,this.$pinia||(this.$pinia=t),t._a=this,g&&d(t)}else!this.$pinia&&e.parent&&e.parent.$pinia&&(this.$pinia=e.parent.$pinia)},destroyed(){delete this._pStores}})},acceptHMRUpdate:function(e,t){return()=>{}},createPinia:y,defineStore:A,getActivePinia:()=>e.getCurrentInstance()&&e.inject(p)||u,mapActions:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]=function(...t){return e(this.$pinia)[n](...t)},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]=function(...n){return e(this.$pinia)[t[i]](...n)},n)),{})},mapGetters:I,mapState:S,mapStores:function(...e){return e.reduce(((e,t)=>(e[t.$id+E]=function(){return t(this.$pinia)},e)),{})},mapWritableState:function(e,t){return Array.isArray(t)?t.reduce(((t,n)=>(t[n]={get(){return e(this.$pinia)[n]},set(t){return e(this.$pinia)[n]=t}},t)),{}):Object.keys(t).reduce(((n,i)=>(n[i]={get(){return e(this.$pinia)[t[i]]},set(n){return e(this.$pinia)[t[i]]=n}},n)),{})},setActivePinia:d,setMapStoreSuffix:function(e){E=e},skipHydrate:function(e){return Object.defineProperty(e,b,{})},storeToRefs:$},Symbol.toStringTag,{value:"Module"}));const V=new class{request(e,t,n){return new Promise(((i,r)=>{uni.request({url:"http://152.136.185.210:7878/api/hy66"+e,method:t||"GET",timeout:6e4,data:n,success(e){i(e.data)},fail(e){r(e)}})}))}get(e,t){return this.request(e,"GET",t)}post(e,t){return this.request(e,"POST",params)}},j=["pop","new","sell"];function x(){let e={};return j.forEach((t=>{e[t]={page:0,list:[]}})),e}const N=A("home",{state:()=>({banners:[],recommends:[],currentType:"pop",goodsList:x()}),actions:{setCurrentType(e){this.currentType=e},async fetchHomeMultidata(){var e;const t=await V.get("/home/multidata",{});this.banners=(null==(e=t.data.banner)?void 0:e.list)||[],this.recommends=t.data.recommend.list||[]},async fetchHomeData(e,t){r("log","at store/home.js:34",e,t);const n=await((e,t)=>V.get("/home/data",{type:e,page:t}))(e,t);this.goodsList[e].list.push(...n.data.list),this.goodsList[e].page=t}}}),O={__name:"home-banner",props:{banners:{type:Array,default:()=>[]}},emits:["bannerItemClick"],setup:(t,{emit:n})=>(i,r)=>(e.openBlock(),e.createElementBlock("swiper",{class:"banner","indicator-dots":!0,"indicator-active-color":"#ff8198",autoplay:!0,interval:3e3,duration:1e3},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.banners,(t=>(e.openBlock(),e.createElementBlock("swiper-item",{key:t,onClick:e=>function(e){n("bannerItemClick",e.link)}(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"])],8,["onClick"])))),128))]))},R=n({__name:"home-recommend",props:{recommends:{type:Array,default:()=>[]}},emits:["itemClick"],setup:(t,{emit:n})=>(i,r)=>(e.openBlock(),e.createElementBlock("view",{class:"recommend"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.recommends,(t=>(e.openBlock(),e.createElementBlock("view",{key:t,class:"recommend-item",onClick:e=>function(e){n("itemClick",e)}(t)},[e.createElementVNode("image",{class:"image",src:t.image,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"title"},e.toDisplayString(t.title),1)],8,["onClick"])))),128))]))},[["__scopeId","data-v-5b40f3e0"]]);const T=n({},[["render",function(t,n){return e.openBlock(),e.createElementBlock("view",{class:"popular"},[e.createElementVNode("image",{class:"image",src:"/static/recommend_bg.jpg",mode:""})])}],["__scopeId","data-v-504db94a"]]),D=n({__name:"tab-control",props:{titles:{type:Array,default:()=>[]}},emits:["tabItemClick"],setup(t,{emit:n}){const i=e.ref(0);return(r,o)=>(e.openBlock(),e.createElementBlock("view",{class:"tab-control"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.titles,((t,r)=>(e.openBlock(),e.createElementBlock("view",{key:r,class:e.normalizeClass(["item",i.value===r?"active":""]),onClick:e=>function(e){i.value=e,n("tabItemClick",e)}(r)},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t),1)],10,["onClick"])))),128))]))}},[["__scopeId","data-v-f7239610"]]),U={__name:"grid-view-item",props:{itemInfo:{type:Object,default:()=>{}}},emits:["itemClick"],setup(t,{emit:n}){const i=t;function r(){n("itemClick",i.itemInfo)}return(n,i)=>(e.openBlock(),e.createElementBlock("view",{class:"goods-item",onClick:r},[e.createElementVNode("image",{class:"image","lazy-load":!0,src:t.itemInfo.show.img,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"desc-info"},[e.createElementVNode("view",{class:"title"},e.toDisplayString(t.itemInfo.title),1),e.createElementVNode("view",{class:"info"},[e.createElementVNode("text",{class:"price"},"￥"+e.toDisplayString(t.itemInfo.price),1),e.createElementVNode("image",{class:"icon",src:"/static/images/common/favor.png"}),e.createElementVNode("text",{class:"cfav"},e.toDisplayString(t.itemInfo.cfav),1)])])]))}},F={__name:"home",setup(t){const n=N(),{banners:r,recommends:a,goodsList:u,currentType:d}=$(n);function p(e){uni.navigateTo({url:"/pages/webview/webview?link="+e})}function m(e){n.setCurrentType(j[e])}function h(e){uni.navigateTo({url:"/pages/detail/detail?iid="+e.iid})}return s((()=>{n.fetchHomeMultidata(),n.fetchHomeData("pop",1),n.fetchHomeData("new",1),n.fetchHomeData("sell",1)})),c((()=>{var e;n.fetchHomeData(d.value,(null==(e=null==u?void 0:u.value[null==d?void 0:d.value])?void 0:e.page)+1)})),(t,n)=>{const s=o(e.resolveDynamicComponent("uni-grid-item"),i),c=o(e.resolveDynamicComponent("uni-grid"),l);return e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createVNode(O,{banners:e.unref(r),onHandleItemClick:p},null,8,["banners"]),e.createVNode(R,{recommends:e.unref(a)},null,8,["recommends"]),e.createVNode(T),e.createVNode(D,{titles:["流行","新款","精选"],onTabItemClick:m}),e.createVNode(c,{column:2,highlight:!0,borderColor:"#ff8198",showBorder:!1,square:!1},{default:e.withCtx((()=>{var t;return[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(null==(t=e.unref(u)[e.unref(d)])?void 0:t.list,((t,n)=>(e.openBlock(),e.createBlock(s,{key:t.iid,index:n},{default:e.withCtx((()=>[e.createVNode(U,{itemInfo:t,onItemClick:h},null,8,["itemInfo"])])),_:2},1032,["index"])))),128))]})),_:1})])}}};const H=n({data:()=>({}),methods:{}},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]);const q=n({data:()=>({}),methods:{}},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]);const L=n({data:()=>({}),methods:{}},[["render",function(t,n,i,r,o,a){return e.openBlock(),e.createElementBlock("view")}]]),M={__name:"detail",props:{iid:String,default:""},setup:t=>(r("log","at pages/detail/detail.vue:13",t.iid),(t,n)=>(e.openBlock(),e.createElementBlock("view")))},z={__name:"webview",props:{link:{type:String,default:""}},setup:t=>(n,i)=>(e.openBlock(),e.createElementBlock("web-view",{src:t.link},null,8,["src"]))};__definePage("pages/home/home",F),__definePage("pages/category/category",H),__definePage("pages/cart/cart",q),__definePage("pages/profile/profile",L),__definePage("pages/detail/detail",M),__definePage("pages/home/cpns/home-banner",O),__definePage("pages/webview/webview",z),__definePage("components/grid-view-item/grid-view-item",U);const G={onLaunch:function(){r("log","at App.vue:4","App Launch")},onShow:function(){r("log","at App.vue:7","App Show")},onHide:function(){r("log","at App.vue:10","App Hide")}};const{app:J,Vuex:Q,Pinia:W}=function(){const t=e.createVueApp(G);return t.use(y()),{app:t,Pinia:P}}();uni.Vuex=Q,uni.Pinia=W,J.provide("__globalStyles",__uniConfig.styles),J._component.mpType="app",J._component.render=()=>{},J.mount("#app")}(Vue,uni.VueShared);
